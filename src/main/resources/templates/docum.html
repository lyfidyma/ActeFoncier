<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css"
      layout:decorate="~{template3}">
<head>
<meta charset="UTF-8"/>
<title>Consultation</title>

	
	<style>
	th{
	font-size:12px;
	}
	td{
	font-size:13px;
	}

  
	</style>
</head>
<body>
	<div layout:fragment="content">
	<div>
	<h4>&nbsp;&nbsp;Consultation</h4>
						   <hr/>
	<h4 th:if="${listDocuments.isEmpty()}==true" style="color:red; text-align:center">Aucun document </h4>
	</div>
		<div class="container"  th:if="${listDocuments.isEmpty()}==false">
		 <div class="col-md-4">
     		 <a th:href="@{/excelExport}" class="btn btn-success" style="border: 1px solid green; background-color: white; color: green;">Export vers Excel 
 			<i class="fa fa-file-excel-o" aria-hidden="true"></i></a>
 			 </div>
 			 <div class="dropdown col-md-4" >
  <button class="btn btn-warning dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Filtre  &nbsp;&nbsp;<span class="caret"></span></button>
  <div class="dropdown-menu">
  <ul>
    <li ><a class="dropdown-item" th:href="@{cons(motCle='Bail',page=${currentPage},size=${size})}">Bail</a></li>
   <li><a class="dropdown-item" th:href="@{cons(motCle='Arrêté',page=${currentPage},size=${size})}">Arrêté</a></li>
   <li><a class="dropdown-item" th:href="@{cons(motCle='Décision',page=${currentPage},size=${size})}">Décision</a></li>
    <li><a class="dropdown-item" th:href="@{cons(motCle='Décret',page=${currentPage},size=${size})}">Décret</a></li>
     <li><a class="dropdown-item" th:href="@{cons(motCle='Autres',page=${currentPage},size=${size})}">Autres</a></li>
    </ul>
  </div>
</div>
     		 	<form th:action="@{cons}" id="searchForm" method="get">   		 	
     				<div class="input-group col-md-4">
        	  		    <input id="motCle" type="text" class="form-control" name="motCle" th:value=${motCle}
                	placeholder="chercher"/>   
                	<div class="input-group-btn">                	 
                 <button type="submit" class="btn btn-info"><span class="glyphicon glyphicon-search"></span></button>
            	</div>
            	</div>
          		</form>
          	</div>
          	
         	<p></p>
         	
 			
   
         
		<div class="container" th:if="${listDocuments.isEmpty()}==false">
			<div class="col-md">
				<div class="panel panel-success">
				
					<!-- <div class="panel-heading">Consultation documents</div> -->
					<div class="panel-body">
						<table class="table table-striped">
							<tr>
							<th>Type document</th><th>Bénéficiaire</th><th>Lot</th><th>Titre foncier</th>
							<th>Superficie</th><th>Site</th><th>Code document</th><th>Responsable</th><th>Statut</th>
							</tr>				
								<tr th:each="d, iteration:${listDocuments}">
									<!-- <td th:text="${iteration.index+1}"></td> -->
									<th:block th:each="td:${d.typeDocument}">
									<td th:text="${td.typeDoc}"></td>
									</th:block>
									
									<th:block th:if="${d.typeBeneficiaire} eq 'Particulier'">
									<th:block th:each="p:${d.personne}">
									<td th:text="${p.cni}"></td>
									</th:block>
									</th:block>
									
									<th:block th:if="${d.typeBeneficiaire} eq 'Entreprise'">
									<th:block th:each="e:${d.entreprise}">
									<td th:text="${e.nomEntreprise}"></td>
									</th:block>
									</th:block>
									<td th:text="${d.lot}"></td>
									<td th:text="${d.titreGlobal}"></td>	
									<td th:text="${d.superficie}"></td>
									<th:block th:each="c:${d.commune}">
									<td th:text="${c.libelleCommune}"></td>
									</th:block>
									<td th:text="${d.codeUniqueDocument}"></td>
									<td th:text="${d.responsableDocument}"></td>
									
									<td th:if="${d.statutDocument} eq 'saisi'" style=" text-align:center" th:text="${d.statutDocument}"></td>
									<td th:if="${d.statutDocument} eq 'transmis'" style="background-color:#849FE5; text-align:center" th:text="${d.statutDocument}"></td>				
									<td th:if="${d.statutDocument} eq 'rejeté'" style="background-color:#F3767E; text-align:center" th:text="${d.statutDocument}"></td>
									<td th:if="${d.statutDocument} eq 'approuvé'" style="background-color:#90EE90; text-align:center" th:text="${d.statutDocument}"></td>
									
								<td><a th:href="@{visualiser(id=${d.idDocument})}"><i class="fas fa-phone"></i> <span class="glyphicon glyphicon-eye-open"></span></a></td>
								<td th:if="${d.statutDocument} eq 'saisi' or ${d.statutDocument} eq 'rejeté' "><a th:href="@{modifier(id=${d.idDocument})}"><span class="glyphicon glyphicon-pencil" style=color:green></span></a></td>
								<td th:if="${d.statutDocument} eq 'transmis' or ${d.statutDocument} eq 'approuvé'"><span class="glyphicon glyphicon-pencil"></span></td>
								<td th:if="${d.statutDocument} eq 'saisi'"><a th:href="@{supprimer(id=${d.idDocument},page=${currentPage},size=${size})}"  onclick="return confirm('Voulez-vous supprimer cet acte?');"><span class="glyphicon glyphicon-trash" style=color:red></span></a></td>
								<td th:if="${d.statutDocument} eq 'transmis' or ${d.statutDocument} eq 'approuvé' or ${d.statutDocument} eq 'rejeté'"><span class="glyphicon glyphicon-trash"></span></td>																				
								</tr>	
						</table>
						
							<!-- Pagination -->
<nav aria-label="pagination">
<div th:if="${totalPages > 0}">
      <div class="row col-sm-10">
       	 <div class="col-md">
       	 	<span>
     		 	<a th:if="${currentPage > 0}" th:href="@{cons(page=0)}">Début</a>
     		 	<span th:unless="${currentPage >= 1}">Début</span>
     		 </span> &nbsp;
      	 	<span>
     		 	<a th:if="${currentPage > 0}" th:href="@{cons(page=${currentPage - 1})}">Préc.</a>
     		 	<span th:unless="${currentPage >= 1}">Préc.</span>
     		 </span> &nbsp; 
        	<span th:each="i: ${#numbers.sequence(0, totalPages-1)}">
        		<a th:if="${currentPage!=i}" th:href="@{cons(page=${i})}">[[${i}]]</a>
        		<span th:unless="${currentPage !=i}">[[${i}]]</span> &nbsp; &nbsp;
     		</span>
     		 <span>
     		 	<a th:if="${currentPage < totalPages-1}" th:href="@{cons(page=${currentPage + 1})}">Suiv.</a>
     		 	<span th:unless="${currentPage < totalPages-1}">Suiv.</span>
     		 </span> &nbsp; 
     		 <span>
     		 	<a th:if="${currentPage < totalPages-1}" th:href="@{cons(page=${totalPages-1})}">Fin</a>
     		 	<span th:unless="${currentPage < totalPages-1}">Fin</span>
     		 </span>
     		  
     		  </div>
     		 
      </div>
   </div>
   </nav>
  <div>
  <span>Total documents :</span><span th:text="${totalItems}"></span>
  </div>
						</div>
					</div>
				</div>
			</div>
		</div>
</body>
</html>