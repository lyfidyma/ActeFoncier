<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css"
      layout:decorate="~{template3}">
<head>
<meta charset="UTF-8"/>
<title>Consultation</title>
	
	<style>
	th{
	font-size:12px;
	}
	td{
	font-size:13px;
	}
.pagination > .active > a{
	color:purple;
    background-color: white ;
    border-color:#ddd;
}
.pagination > .disabled > a{
    background-color: lightblue ;
}
	</style>
</head>
<body>
	<div layout:fragment="content">
	<div>
	<h4>&nbsp;&nbsp;Consultation</h4>
						   <hr/>
	<h4 th:if="${listDocuments.isEmpty()}==true" style="color:red; text-align:center">Aucun document </h4>
	</div>
		<div class="container"  th:if="${listDocuments.isEmpty()}==false">
		 <div class="col-md-11">
     		 <a th:href="@{/excelExport}" class="btn btn-success" style="border: 1px solid green; background-color: white; color: green;">Export vers Excel 
 			<i class="fa fa-file-excel-o" aria-hidden="true"></i></a>
 			 </div>
 			 <div class="dropdown col-md-1" th:object="${unTypeDocument}">
  <button class="btn btn-warning dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Filtre  &nbsp;&nbsp;<span class="caret"></span></button>
  <div class="dropdown-menu">
  <ul th:each="t:${type}">
    <li ><a class="dropdown-item" th:text="${t.typeDoc}"  th:href="@{cons(keySearch=${t.typeDoc},page=${currentPage},size=${size})}"></a></li>
  
    </ul>
  </div>
</div>
     		 	<!-- <form th:action="@{cons}" id="searchForm" method="get">   		 	
     				<div class="input-group col-md-4">
        	  		    <input id="motCle" type="text" class="form-control" name="motCle" th:value=${motCle}
                	placeholder="chercher"/>   
                	<div class="input-group-btn">                	 
                 <button type="submit" class="btn btn-info"><span class="glyphicon glyphicon-search"></span></button>
            	</div>
            	</div>
          		</form> -->
          	</div>
          	
         	<p></p>
         	
 			
   
         
		<div class="container" th:if="${listDocuments.isEmpty()}==false">
			<div class="col-md">
				<div class="panel panel-success">
				
					<!-- <div class="panel-heading">Consultation documents</div> -->
					<div class="panel-body">
						<table class="table table-striped">
							<tr>
							<th>Type document</th><th>Bénéficiaire</th><th>Lot</th><th>Titre foncier</th>
							<th>Superficie</th><th>Site</th><th>Code document</th><th>Responsable</th><th>Statut</th>
							</tr>				
								<tr th:each="d, iteration:${listDocuments}">
									<!-- <td th:text="${iteration.index+1}"></td> -->
									<th:block th:each="td:${d.typeDocument}">
									<td th:text="${td.typeDoc}"></td>
									</th:block>
									
									<th:block th:if="${d.typeBeneficiaire} eq 'Particulier'">
									<th:block th:each="p:${d.personne}">
									<td th:text="${p.cni}"></td>
									</th:block>
									</th:block>
									
									<th:block th:if="${d.typeBeneficiaire} eq 'Entreprise'">
									<th:block th:each="e:${d.entreprise}">
									<td th:text="${e.nomEntreprise}"></td>
									</th:block>
									</th:block>
									<td th:text="${d.lot}"></td>
									<td th:text="${d.titreGlobal}"></td>	
									<td th:text="${d.superficie}"></td>
									<th:block th:each="c:${d.commune}">
									<td th:text="${c.libelleCommune}"></td>
									</th:block>
									<td th:text="${d.codeUniqueDocument}"></td>
									<td th:text="${d.responsableDocument}"></td>
									
									<td th:if="${d.statutDocument} eq 'saisi'" style=" text-align:center" th:text="${d.statutDocument}"></td>
									<td th:if="${d.statutDocument} eq 'transmis'" style="background-color:#849FE5; text-align:center" th:text="${d.statutDocument}"></td>				
									<td th:if="${d.statutDocument} eq 'rejeté'" style="background-color:#F3767E; text-align:center" th:text="${d.statutDocument}"></td>
									<td th:if="${d.statutDocument} eq 'approuvé'" style="background-color:#90EE90; text-align:center" th:text="${d.statutDocument}"></td>
									
								<td><a th:href="@{visualiser(id=${d.idDocument})}"><i class="fas fa-phone"></i> <span class="glyphicon glyphicon-eye-open" title="Détails" ></span></a></td>
								<td th:if="${d.statutDocument} eq 'saisi' or ${d.statutDocument} eq 'rejeté' "><a th:href="@{modifier(id=${d.idDocument})}"><span class="glyphicon glyphicon-pencil" title="Editer"  style=color:green></span></a></td>
								<td th:if="${d.statutDocument} eq 'transmis' or ${d.statutDocument} eq 'approuvé'"><span class="glyphicon glyphicon-pencil"></span></td>
								<td th:if="${d.statutDocument} eq 'saisi'"><a th:href="@{supprimer(id=${d.idDocument},page=${currentPage},size=${size})}"  onclick="return confirm('Voulez-vous supprimer cet acte?');"><span class="glyphicon glyphicon-trash" title="Supprimer" style=color:red></span></a></td>
								<td th:if="${d.statutDocument} eq 'transmis' or ${d.statutDocument} eq 'approuvé' or ${d.statutDocument} eq 'rejeté'"><span class="glyphicon glyphicon-trash"></span></td>																				
								</tr>	
						</table>
						
							<!-- Pagination -->
<nav aria-label="pagination">
<div  th:if="${totalPages > 0}">
      <div class="row col-sm-10">
       	 <div class="col-md">
       	 <ul class="pagination">
       	 	
     		 	<!-- <li th:if="${motCle==null} and ${keySearch==null}"><a th:if="${currentPage > 0}" th:href="@{cons(page=0)}">Début</a></li>
     		 	<li th:if="${motCle!=null}"><a th:if="${currentPage > 0}" th:href="@{cons(page=0 , motCle=${motCle})}">Début</a></li>
     		 	<li th:if="${keySearch!=null}"><a th:if="${currentPage > 0}" th:href="@{cons(page=0 , keySearch=${keySearch})}">Début</a></li>
     		 	<li th:unless="${currentPage >= 1}">Début</li> -->
     		 
     		 	<li class="page-item" th:if="${motCle==null} and ${keySearch==null}"><a class="page-link" th:if="${currentPage > 0}" th:href="@{cons(page=${currentPage - 1})}">&larr;</a></li>
     		 	<li  class="page-item" th:if="${motCle!=null}"><a class="page-link" th:if="${currentPage > 0}" th:href="@{cons(page=${currentPage - 1}, motCle=${motCle})}">&larr;</a></li>
     		 	<li  class="page-item" th:if="${keySearch!=null}"><a class="page-link" th:if="${currentPage > 0}" th:href="@{cons(page=${currentPage - 1}, keySearch=${keySearch})}">&larr;</a></li>
     		 	<li  class="page-item"><a class="page-link" th:unless="${currentPage >= 1}">&larr;</a></li>
     		  
        		<th:block th:each="i: ${#numbers.sequence(0, totalPages-1)}" >
        		<li class="page-item active" th:if="${motCle==null} and ${keySearch==null}"><a class="page-link" th:if="${currentPage!=i}" th:href="@{cons(page=${i})}">[[${i}]]</a></li>
        		<li class="page-item active" th:if="${motCle!=null}"><a class="page-link" th:if="${currentPage!=i}" th:href="@{cons(page=${i}, motCle=${motCle})}">[[${i}]]</a></li>
        		<li class="page-item active" th:if="${keySearch!=null}"><a class="page-link" th:if="${currentPage!=i}" th:href="@{cons(page=${i}, keySearch=${keySearch})}">[[${i}]]</a></li>
        		<li class="page-item disabled"><a class="page-link" th:unless="${currentPage !=i}">[[${i}]]</a></li>
     			</th:block>
     		
     		 	<li  class="page-item" th:if="${motCle==null} and ${keySearch==null}" ><a class="page-link" th:if="${currentPage < totalPages-1}" th:href="@{cons(page=${currentPage + 1})}">&rarr;</a></li>
     		 	<li  class="page-item" th:if="${motCle!=null}"><a class="page-link" th:if="${currentPage < totalPages-1}" th:href="@{cons(page=${currentPage + 1}, motCle=${motCle})}">&rarr;</a></li>
     		 	<li  class="page-item" th:if="${keySearch!=null}"><a class="page-link" th:if="${currentPage < totalPages-1}" th:href="@{cons(page=${currentPage + 1}, keySearch=${keySearch})}">&rarr;</a></li>
     		 	<li  class="page-item"><a class="page-link" th:unless="${currentPage < totalPages-1}">&rarr;</a></li>
     		 
     		 	<!-- <li th:if="${motCle==null} and ${keySearch==null}"><a th:if="${currentPage < totalPages-1}" th:href="@{cons(page=${totalPages-1})}">Fin</a></li>
     		 	<li th:if="${motCle!=null}"><a th:if="${currentPage < totalPages-1}" th:href="@{cons(page=${totalPages-1}, motCle=${motCle})}">Fin</a></li>
     		 	<li th:if="${keySearch!=null}"><a th:if="${currentPage < totalPages-1}" th:href="@{cons(page=${totalPages-1}, keySearch=${keySearch})}">Fin</a></li>
     		 	<li th:unless="${currentPage < totalPages-1}">Fin</li> -->
     		
     		  </ul>
     		  </div>
     		 
      </div>
   </div>
   </nav>
  <div>
  Total documents : <span th:text="${totalItems}"></span>
						</div>
					</div>
				</div>
			</div>
		</div>
		</div>
</body>
</html>