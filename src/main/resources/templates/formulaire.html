<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
       xmlns:layout="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css"
      layout:decorate="~{template3}">
<head>
<meta charset="UTF-8"/>
<title>Mes Documents</title>
<style>
.error{
	color:red;
}
div{
padding:3px;
}
</style>
</head>
<body>
	<div layout:fragment="content">
		<div class="container">
			<div class="col-md">
				<div class="panel panel-primary " >
					<div class="panel-heading">Ajouter un document</div>
					
					<div class="panel-body">
						<form th:action="@{/sauvegarderDocument}" method="post" th:object="${unDocument}">	
						 
							  <div class="col-md-3">
							      <select id="typeDoc" name ="typeDoc" class="form-control">
							      <option value="" hidden>Type de document</option>
							      <option value="Bail">Bail</option>
							       <option value="Arrêté">Arrêté</option>
							       <option value="Décision">Décision</option>
							       <option value="Décret">Décret</option>
							       <option value="Autres">Autres</option>
							    </select>
							     <p th:if="${messageTypeDoc}" th:text="${messageTypeDoc}" style= color:red></p>
							  </div>
							  
							  <div class="col-md-3">
							    <input type="text" th:field="*{numDocument}" class="form-control" placeholder="Numéro du document" />
  						 		<p th:if="${#fields.hasErrors('numDocument')}" th:errors="*{numDocument}" th:errorclass="error"></p>
							  </div>
							  <div class="col-md-3">
								<textarea style="resize:none" class="form-control" name="objetDocument" rows="4" placeholder="Objet" ></textarea>
							  </div>
							   
						<br style="clear: both;"/>
						
						
						 <div class="col-md-3">
						     	<label for="dateDocument" style="font-size:12px" >Date du document</label>
							    <input type="date" name="dateDocument" class="form-control" />
							    
							    </div>
							    <div class="col-md-3">
                	
						     	<label for="dateApprobation" style="font-size:12px">Date approbation</label>
							    <input type="date" name="dateApprobation"  class="form-control" />
                		</div>	
						

							  
						  
							
						   <br style="clear: both;"/>
						   <div class="col-md-6">
							    <label for="responsable" class="form-label"></label>
							    <input type="text" name = "responsableDocument"  th:value="*{responsableDocument}" class="form-control" placeholder="Responsable" />
							  </div>
							  <br style="clear: both;"/>
							  <br style="clear: both;"/>
						   <p></p>
						   <fieldset style="border:1px solid #999; border-radius:8px; box-shadow:0 0 8px #999;padding:6px; ">
						<legend style="font-size:14px; color:green"><b>Bénéficiaire</b></legend>
							  <div class="col-md-3">
							    <select id="typeBeneficiaire" name="typeBeneficiaire"  class="form-control" onchange="showDiv('forEntreprise', this)">
							      <option value="" hidden>------------</option>
							      <option value="Entreprise">Entreprise</option>
							       <option value="Particulier">Particulier</option>						       
							    </select>
							  </div>
							  <script>
      							function showDiv(divId, element) {
      							   document.getElementById(divId).style.display = element.value == "Entreprise" ? 'block' : 'none';
    							  }
  							  </script> 
  							  
  							  <div th:each="d:${unDocument}">
							   <div class="col-md-3" >
							    <input type="text" name ="nomPersonne" class="form-control" placeholder="Nom" />
							  <p></p>
							    <input type="text" name ="prenom" class="form-control" placeholder="Prénom" />
							  </div>
							  
							   <div class="col-md-6" id="forEntreprise" style="display: none;" >
							   <input type="text"  name ="nomEntreprise"  class="form-control" style="background-color: #BCEAF8"
							   			placeholder="Nom de l'Entreprise" />
							  <p></p>
							    <input type="text" name ="ninea" class="form-control" style="background-color: #BCEAF8" placeholder="Ninea" aria-label="ninea"/>
							  </div>

						   <br style="clear: both;"/>
						   
						   
						   <div class="col-md-3">
						 
						     	<label for="cni" class="form-label"></label>
							    <input type="text" name = "cni" class="form-control"  placeholder="Numéro de la pièce d'identité"/>
						 
						  <p th:if="${message}" th:text="${message}" style= color:red></p>
						  
						 	</div >
						  					   
						   <div class="col-md-3" >
						     	<label for="nin" class="form-label"></label>
							    <input type="text" name="nin" class="form-control" placeholder="Numéro CEDEAO"/>
						  </div>
						   
						   <div class="col-md-3" >
						     	<label for="dateDelivrance" class="form-label" style="font-size:12px">Date délivrance</label>
							    <input type="date" name="dateDelivrance" class="form-control" />
						  </div>	
						 </div>
						 </fieldset>
						 <br style="clear: both;"/>
						 
						  <div class="col-md-2">
							    <label for="lot" class="form-label"></label>
							    <input type="text" th:field="*{lot}" class="form-control" placeholder="Lot" />
							    <p th:if="${#fields.hasErrors('lot')}" th:errors="*{lot}" th:errorclass="error"></p>
							  </div>
							 
							  <div class="col-md-2">
							    <label for="titreGlobal" class="form-label"></label>
							    <input type="text" th:field ="*{titreGlobal}"  class="form-control" placeholder="Titre global" />
							     <p th:if="${#fields.hasErrors('titreGlobal')}" th:errors="*{titreGlobal}" th:errorclass="error"></p>
							  </div>
						 
						  <div class="col-md-2">
						     	<label for="superficie" class="form-label"></label>
							    <input  type="text" th:field="*{superficie}" class="form-control" placeholder="Superficie" />
							     <p th:if="${#fields.hasErrors('superficie')}" th:errors="*{superficie}" th:errorclass="error"></p>
						  </div>
						  
						  <div class="col-md-3">
						     	<label for="nicad" class="form-label"></label>
							    <input type="text" th:field="*{nicad}" class="form-control"  placeholder="nicad" />
							     <p th:if="${#fields.hasErrors('nicad')}" th:errors="*{nicad}" th:errorclass="error"></p>
						  </div>
						  <br style="clear: both;"/>
						   
						   <div class="col-md-3">
						     	<label for="commune" class="form-label"></label>
							    <input type="text" name="commune" class="form-control" placeholder="Commune"/>
						  </div>	
						  <div class="col-md-3" >
						     	<label for="communeArrond" class="form-label"></label>
							    <input type="text" name="communeArrond" class="form-control" placeholder="Commune d'arrondissement"/>
						  </div>
						  <div class="col-md-3">
						     	<label for="departement" class="form-label"></label>
							    <input type="text" name="departement" class="form-control" placeholder="Département"/>
						  </div>
						  <div class="col-md-3">
						     	<label for="region" class="form-label"></label>
							    <input type="text" name="region" class="form-control" placeholder="Région"/>
						  </div>
						  
						  <br style="clear: both;"/>
						   
						   
						  <div class="col-md-3" >
						     	<label for="numPj" class="form-label"></label>
							    <input type="text" name="numPj" class="form-control" placeholder="Numéro de la pièce jointe"/>
						  </div>	
						  <div class="col-md-3">
						     	<label for="datePieceJointe" class="form-label" style="font-size:12px">Date pièce jointe</label>
							    <input type="date" name="datePj" class="form-control" />
						  </div>
						  <div class="col-md-4" >
						     	<label for="objetPj" class="form-label"></label>
							    <input type="text" name="objetPj" class="form-control" placeholder="Objet pièce jointe"/>
						  </div>
						  
						  
						  <div class="col-md-2">
						  <label></label>
						  <p></p>
						
						  <p><a><span id="spanPj" class="glyphicon glyphicon-plus"></span></a></p> 
						  </div>
						  <script>
						  var b1 = document.getElementById("spanPj");
						  b1.addEventListener("click", showPj);
						  function showPj() {
								document.getElementById("forPj").style.display= "block";
							  }
  						  </script> 
  						  
						  <br style="clear: both;"/>
						   
  						  <div id="forPj" style="display: none;">
						  <div class="col-md-3" >
						     	<label for="numPj1" class="form-label"></label>
							    <input type="text" name="numPj1" class="form-control" placeholder="Numéro de la pièce jointe"/>
						  </div>	
						  <div class="col-md-3" >
						     	<label style="font-size:12px">Date pièce jointe</label>
							    <input type="date" name="datePj1" class="form-control" />
						  </div>
						  <div class="col-md-4" >
						     	<label for="objetPj1" class="form-label"></label>
							    <input type="text" name="objetPj1" class="form-control" placeholder="Objet pièce jointe"/>
						  </div>
						   <div class="col-md-2">
						  <label></label>
						  <p></p>
						
						  <p><a><span id="spanPj1" class="glyphicon glyphicon-minus"></span></a></p> 
						  </div>
						  </div>
						   <script>
						  var b2 = document.getElementById("spanPj1");
						  b2.addEventListener("click", hidePj);
						  function hidePj() {
								
								document.getElementById("forPj").style.display= "none";
							  }
				
      							
  							  </script> 
						 
					  <div class="col-md-3">
					    <button type="submit" class="btn btn-primary">Enregistrer</button>
					  </div>
					
					</form>	
					</div>
				</div>
			</div>
		</div>	
	 </div>
	 
	 
</body>
</html>